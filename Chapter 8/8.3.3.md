# 8.3.3 진정한 is-a 관계는 어떤가?

> 두 클래스가 진정한 is-a 관계를 맺고 있다면 상속이 타당할 수 있다

라고 했었습니다.  
포드 머스탱은 승용차이므로 `FordMustang` 클래스가 `Car`를 확장할 수 있습니다.  
그러나 `IntFileReader`는 `CsvFileHandler` 가 아닙니다. is-a 관계가 잘 맞지 않아요.  
그래서 이런 경우 상속보다 구성이 더 나을 수 있다는 것을 확인했습니다.  

그러나 두 클래스가 진짜 is-a 관계라고 해서 상속이 좋은지에 대해서는 답이 없다고 합니다...🥲  
상황에 맞게 잘 판단할 수 있어야겠죠.

찐찐 is-a 관계여도 다음과 같은 점들을 주의해야 합니다.

## 취약한 베이스 클래스 문제
서브클래스가 슈퍼클래스를 상속하고, 나중에 해당 슈퍼클래스가 변경되면 서브클래스가 작동하지 않을 수도 있습니다.  
> 서브클래스에서 일부 기능은 오버라이딩하고, 일부 기능은 공통 기능을 사용한다고 해봅시다.  
> 나중에 슈퍼클래스가 변경되면 서브클래스가 이상해질 가능성이 높겠죠.  
> 상속이 강한 결합이기 때문이고, 한 번 만든 상속 관계 클래스들의 코드 수정을 어렵게 만드는 요인이기도 합니다.

## 다이아몬드 문제
다중 상속이 가능하면, 컴파일러가 상위 클래스 중 어떤 클래스의 메서드를 사용해야 할지 모르게 되는 문제입니다.

이건 여기서 짧게 설명하는 것보다 링크가 더 도움될 것 같아 링크로 첨부합니다!  
[다이아몬드 문제](https://youngjinmo.github.io/2021/03/diamond-problem/)  


## 문제가 있는 계층 구조
> 이건 우리 미션에서도 상속을 대체해 바로 써먹을 수 있는 최선의 구조라고 생각해요.  
> 그래서 블랙잭, 체스를 이렇게 리팩터링 해보려고 합니다.  
> 여러분은 어떻게 생각하시나요?
### 문제
모든 차는 `Car` 클래스를, 모든 비행기는 `Aircraft` 클래스를 상속해야 한다고 가정해볼게요.  
하늘을 나는 자동차는 어떡하죠?

![image](https://user-images.githubusercontent.com/39221443/226139406-7ceb5722-e44f-499c-9553-d4bd33cecdfb.png)

### 해결
- 인터페이스를 사용한 계층 구조 정의
- 구성을 사용한 코드 재사용

자동차, 비행기와 같은 상위 계층은 인터페이스로 정의하고, 동작은 `DrivingAction`, `FlyingAction`을 구현해 구성(조합)을 사용했습니다.  
이러면 상속의 문제를 피하면서도, 코드를 재사용해 `FlyingCar`를 만들 수 있겠네요.

![image](https://user-images.githubusercontent.com/39221443/226139914-966c48e3-70f4-4c62-a396-97f870bde37c.png)