# 불변 객체로 만드는 것을 고려하라

객체가 생성된 후에 상태를 바꿀 수 없다면 이 객체는 **불변 객체**이다.

불변해야 하는 이유를 이해하기 위해서는 **가변 객체**가 위험한 이유를 살펴보면 된다.



```java
1. 설정 함수를 갖는 가변 클래스에서 어떻게 잘못된 설정이 이뤄지고, 잘못된 상태가 된다. (3.3절)
2. 입력 매개변수를 변경할 수 있는 가변 객체는 예상을 벗어나는 동작을 초래한다 (6.4절)

3. 가변 객체는 추론하기 어렵다.
- 주스 한 박스를 산다고 할 때, 
'변질 방지' 스티커가 붙어 있는 박스와 아무것도 붙어 있지 않은 박스가 있다고 하자.
'변질 방지' 스티커가 붙어 있는 박스는 박스 내용물이 변경되지 않았음을 추론할 수 있다.
하지만, 아무것도 붙어 있지 않은 박스는 어디서, 어떻게 전달되었는지 추론하기가 상당히 힘들다.

4. 가변 객체는 다중 스레드에서 문제가 발생할 수 있다.
6.3절 부수 효과를 피하라에서 부수 효과가 어떻게 다중 스레드에서 문제를 일으킬 수 있는지 살펴봤다.
(p 181 그림 참고)
```

하지만, 객체를 불변으로 만드는 것이 항상 가능하지도 않고 항상 적절한 것은 아니다.

필연적으로 상태 변화를 추적해야 하는 경우가 있고 이때는 가변적인 자료구조가 필요하다.
> 필연적으로 상태 변화를 추적해야 하는 상황이 어떤 게 있을까요? 궁금합니다!

따라서 기본적으로 불변적인 객체를 만들되, 필요한 곳에서만 가변이 되도록 하는 것이 바람직하다.
